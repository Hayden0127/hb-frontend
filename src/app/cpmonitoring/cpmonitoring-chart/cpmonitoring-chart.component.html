<div class="d-flex page-breadcrumb mb-2">
    <div>
        <a class="d-flex align-items-center mb-2 back link" (click)="onBack()"><i-feather name="arrow-left" class="feather-sm"></i-feather><p class="m-0 mx-2">Back to See All Location</p></a>  
        <h2>{{chartData.cpMonitoringDetails.siteName}}</h2>    
    </div>

    <div class="ms-auto action-dropdown">
        <p class="m-0"><small class="text-muted">OCPP</small></p>
        <div class="d-flex align-items-center" ngbDropdown #actionDropDown="ngbDropdown" id="actionDropDown">
            <button class="btn btn-sm btn-dropdown d-flex w-100" id="actionDropDown" ngbDropdownToggle
                [disabled]="chartData.cpMonitoringDetails.chargingPointCurrentStatusList.length == 0 "> 
                <span class="active ms-2" [class.text-muted]="btnText == 'Select'" [innerHTML]="btnText"></span>
            </button>
            <div ngbDropdownMenu aria-labelledby="actionDropDown">
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="alert-circle" class="icon"></i-feather><span>Reserve Now</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="power" class="icon"></i-feather><span>Cancel Reservation</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('ChangeAvailability', $event)"><i-feather name="calendar" class="icon"></i-feather><span>Change Availability</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="settings" class="icon"></i-feather><span>Change Configuration</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('ClearCache', $event)"><i-feather name="x-circle" class="icon"></i-feather><span>Clear Cache</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="circle" class="icon"></i-feather><span>Clear Charging Profile</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="upload-cloud" class="icon"></i-feather><span>Data Transfer</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="clock" class="icon"></i-feather><span>Get Composite Schedule</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="sliders" class="icon"></i-feather><span>Get Configuration</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="crosshair" class="icon"></i-feather><span>Get Diagnostics</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="list" class="icon"></i-feather><span>Get Local List Version</span></button>

                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('RemoteStartTransaction', $event)"><i-feather name="power" class="icon"></i-feather><span>Remote Start Transaction</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('RemoteStopTransaction', $event)"><i-feather name="slash" class="icon"></i-feather><span>Remote Stop Transaction</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('Reset', $event)"><i-feather name="rotate-ccw" class="icon"></i-feather><span>Reset</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="file-text" class="icon"></i-feather><span>Send Local List</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="smile" class="icon"></i-feather><span>Set Charging Profile</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('TriggerMessage', $event)"><i-feather name="message-square" class="icon"></i-feather><span>Trigger Message</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="openActionFormModal('UnlockConnector', $event)"><i-feather name="unlock" class="icon"></i-feather><span>Unlock Connector</span></button>
                <button class="dropdown-item d-flex aslign-item-center" (click)="onAction('', $event)"><i-feather name="shield" class="icon"></i-feather><span>Update Firmware</span></button>

            </div>
        </div> 
    </div>
</div>
<div class="row m-0 mb-2">
    <div class="col-6 mb-2">
        <div class="row m-0">
            <div class="col-lg-4 col-md-6 m-auto align-self-center mb-1">
                <select name="cp" id="cp" class="form-select bg-white mb-2" [(ngModel)]="_tempDisplay" (change)="changeCPView($event.target.value)">
                    <option *ngFor="let cp of chartData.cpMonitoringDetails.chargingPointCurrentStatusList" [value]="cp.id">{{ cp.name }}</option>
                </select>

                <span class="row justify-content-center">
                    <p class="text-success mb-1"
                        *ngIf="selectedCP.isOnline && !isReboot">
                        <span class="dot bg-success"></span>{{'Online'}}
                    </p>
                    <p class="text-danger text-center mb-1"
                        *ngIf="!selectedCP.isOnline && !isReboot">
                        <span class="dot bg-danger"></span>{{'Offline'}}
                    </p>
                    <p class="text-info mb-1 blinker" *ngIf="isReboot">
                        <span class="dot bg-info"></span>{{'Rebooting...'}}
                    </p>
                    <!-- <small class="badge info mt-0 mb-1">{{'In Use'}}</small> -->
                </span>
                <span class="row p-1 justify-content-center">
                    <img class="img-cp" src="assets/images/charge-point.png" alt="">
                </span>
                <div class="row justify-content-center mt-4">
                    <button class="btn btn-primary text-white reboot-button" (click)="remoteReboot()">
                        <div *ngIf="!isReboot"><i-feather name="refresh-cw"></i-feather>Remote Reboot</div>
                        <div class="spinner mt-0 mb-0" *ngIf="isReboot">
                            <div class="double-bounce1"></div>
                            <div class="double-bounce2"></div>
                        </div>
                    </button>
                    <small class="text-muted pt-2">*by clicking the remote reboot, CP will automatically restart the device.</small>
                </div>
            </div>
            <div class="col-lg-8 col-md-12 mb-2 ps-3">
                <div class="row m-0 map-view">
                    <agm-map [latitude]="chartData.cpMonitoringDetails.latitude"
                        [longitude]="chartData.cpMonitoringDetails.longitude" [zoom]="zoom" [disableDefaultUI]="true"
                        [streetViewControl]="false" [minZoom]="zoom" [maxZoom]="zoom" [gestureHandling]="false"
                        (mapReady)="mapReady($event)">
                        <agm-marker [latitude]="chartData.cpMonitoringDetails.latitude"
                            [longitude]="chartData.cpMonitoringDetails.longitude" [iconUrl]="{
                            url: markerIconUrl.red,
                            scaledSize: {
                                width: 25,
                                height: 40
                            }
                          }">
                            <agm-info-window [isOpen]="true">
                                <div class="marker-info mb-2">
                                    <small class="d-flex fw-bold">CP Location</small>
                                    <small>{{chartData.cpMonitoringDetails.address}}</small>
                                </div>
                                <div class="marker-info">
                                    <small class="d-flex fw-bold">Maintenance Program</small>
                                    <small>{{chartData.cpMonitoringDetails.maintenanceProgram}}</small>
                                </div>
                            </agm-info-window>
                        </agm-marker>
                    </agm-map>
                </div>
                <div class="row mx-1">
                    <div class="card">
                        <div class="card-body px-2 py-0 d-flex">
                            <div class="row">
                                <div class="col-6 py-3 px-2">
                                    <div class="row">
                                        <div class="col-lg-4 p-0 d-flex justify-content-center align-items-center">
                                            <img width="40px" src="assets/icons/connector-type/type-2.svg" alt="">
                                        </div>
                                        <div class="col-lg-6 col-md-8 p-1 col-md-3">
                                            <small class="d-flex mb-2 default-label">{{ 'CCS Combo Type 2' }}</small>
                                            <small class="d-flex mb-1 text-muted">{{ 'Up to 350kW DC' }}</small>
                                            <div class="d-flex justify-content-end text-success mb-1"><small>{{ 41 }}kWh</small></div>
                                            <div class="progress">
                                                <div class="progress-bar bg-success" role="progressbar" style="width: 20%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 left-shadow p-3">
                                    <div class="row">
                                        <small class="text-muted">TOTAL CHARGING</small>
                                        <h2 class="text-dark pt-2">204</h2>
                                        <p class="pt-2">
                                            <span class="status-label text-info">{{ 67 }} completed</span>
                                            <span class="status-label text-warning">{{ 5 }} failed</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-6 p-0">
        <div class="row m-0" style="column-gap: 20px;">
            <div class="col card summary-card">
                <div class="card-body px-2">
                    <small class="title-1 text-muted fw-bold"><i-feather name="zap" class="feather-sm"></i-feather>
                        TOTAL ENERGY</small>
                    <p class="h2 mt-2">{{ 57 | number: '1.0' }} <small>kW</small></p>
                </div>
            </div>
            <div class="col card summary-card">
                <div class="card-body px-2">
                    <small class="title-1 text-muted fw-bold"><i-feather name="zap" class="feather-sm"></i-feather>
                        POWER UTILISATION</small>
                    <p class="h2 mt-2">{{ 53 | number: '1.0' }} <small>kWh</small></p>
                </div>
            </div>
            <div class="col card summary-card">
                <div class="card-body px-2">
                    <small class="title-1 text-muted fw-bold"><img width="15px" class="" src="assets/icons/sort.svg" alt="">
                        TRANSACTION</small>
                    <p class="h2 mt-2">{{ 117 | number: '1.0' }} <small class="text-danger"><i-feather name="arrow-down" class="feather-sm"></i-feather> {{ 0.05 | percent }}</small></p>
                </div>
            </div>
        </div>
        <div class="row m-0" style="column-gap: 15px;">
            <div class="col card">
                <div class="p-3">
                    <p class="d-flex h5 m-0 mb-2">{{ 'Carbon Footprint Reduction' | translate }}</p>
                    <div class="d-flex mt-3">
                        <div class="col">
                            <span class="d-inline"><p class="h3 m-0 text-stat">{{ chartData.toDateChargingDetails.cO2ReductionKg | number: '1.1-2' }} <small>kg</small></p></span>
                            <span class="d-inline"><small class="text-muted">CO2 saved</small></span>
                        </div>
                        <div class="col">
                            <span class="d-inline"><p class="h3 m-0 text-stat">{{ chartData.toDateChargingDetails.fuelReplacedLitre | number: '1.1-2'}} <small>L</small></p></span>
                            <span class="d-inline"><small class="text-muted">Fuel replaced</small></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col card">
                <div class="p-3">
                    <p class="d-flex h5 m-0 mb-2">{{ 'Charging Session' | translate }}</p>
                    <div class="mt-3">
                        <span class="d-inline"><p class="h3 m-0 text-stat">{{ chartData.toDateChargingDetails.chargingSession }} <small>sessions</small></p></span>
                        <span *ngIf="chartData.toDateChargingDetails.chargingSessionPercentage != 0" class="d-inline">
                            <i-feather *ngIf="chartData.toDateChargingDetails.chargingSessionPercentage > 0" name="trending-up" class="feather-sm text-success text-start"></i-feather>
                            <i-feather *ngIf="chartData.toDateChargingDetails.chargingSessionPercentage < 0" name="trending-down" class="feather-sm text-danger text-start"></i-feather>
                            <small class="ms-2 text-muted">{{ Math.abs(chartData.toDateChargingDetails.chargingSessionPercentage) | percent }} 
                                <span *ngIf="chartData.toDateChargingDetails.chargingSessionPercentage > 0">increase</span>
                                <span *ngIf="chartData.toDateChargingDetails.chargingSessionPercentage < 0">decrease</span>
                            </small>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row m-0" style="column-gap: 15px;">
            <div class="col card">
                <div class="p-3">
                    <p class="d-flex h6 m-0 mb-2 fw-bold">{{ 'Charge Point Status' | translate }}</p>
                    <div class="d-flex mt-3">
                        <div class="col m-auto">
                            <div class="d-flex justify-content-between align-items-center" *ngFor="let cs of chartData.toDateChargingDetails.cpConnectorStatus">
                                <span class="d-flex align-items-center">
                                    <small class="color-code" [style.background]="cs.colorCode"></small>
                                    <small class="px-1">{{ cs.status }}</small>
                                </span>
                                <small class="px-1">{{ cs.percentage | percent }}</small>
                            </div>
                        </div>
                        <div class="col d-flex justify-content-center m-auto">       
                            <div class="position-relative">
                                <apx-chart class="" [series]="chartPointStatusChartOptions.series" [chart]="chartPointStatusChartOptions.chart"
                                    [dataLabels]="chartPointStatusChartOptions.dataLabels" [legend]="chartPointStatusChartOptions.legends"
                                    [colors]="chartPointStatusChartOptions.colors" [stroke]="chartPointStatusChartOptions.stroke"
                                    [labels]="chartPointStatusChartOptions.labels" [tooltip]="chartPointStatusChartOptions.tooltip"
                                    [plotOptions]="chartPointStatusChartOptions.plotOptions">                                    
                                </apx-chart>   
                                <div class="chart-title">
                                    <span class="chart-font h5 m-0 text-black fw-bold">{{ chartData.toDateChargingDetails.chargingSession }}</span>
                                    <span class="chart-font m-0"><small>sessions</small></span>
                                </div>
                            </div>                     
                                                        
                        </div>
                    </div>
                </div>
            </div>
            <div class="col card">
                <div class="p-3 h-100">
                    <p class="d-flex h6 m-0 mb-2 fw-bold">{{ 'Payment Transaction' | translate }}</p>
                    <div class="d-flex m-0 h-75 align-items-center my-3">
                        <div class="col">
                            <span class="d-inline"><p class="h3 m-0 text-success text-start">{{ chartData.toDateChargingDetails.successTransactionCount }} <small>success</small></p></span>
                            <span *ngIf="chartData.toDateChargingDetails.successTransactionPercentage != 0" class="d-inline">
                                <i-feather *ngIf="chartData.toDateChargingDetails.successTransactionPercentage > 0" name="trending-up" class="feather-sm text-success text-start"></i-feather>
                                <i-feather *ngIf="chartData.toDateChargingDetails.successTransactionPercentage < 0" name="trending-down" class="feather-sm text-success text-start"></i-feather>
                                <small class="ms-2 text-muted">{{ Math.abs(chartData.toDateChargingDetails.successTransactionPercentage) | percent }} 
                                    <span *ngIf="chartData.toDateChargingDetails.successTransactionPercentage > 0">increase</span>
                                    <span *ngIf="chartData.toDateChargingDetails.successTransactionPercentage < 0">decrease</span>
                                </small>
                            </span> 
                        </div>
                        <div class="col">
                            <span class="d-inline"><p class="h3 m-0 text-danger text-start">{{ chartData.toDateChargingDetails.failedTransactionCount }} <small>Failed</small></p></span>
                            <span *ngIf="chartData.toDateChargingDetails.failedTransactionPercentage != 0" class="d-inline">
                                <i-feather *ngIf="chartData.toDateChargingDetails.failedTransactionPercentage > 0" name="trending-up" class="feather-sm text-danger text-start"></i-feather>
                                <i-feather *ngIf="chartData.toDateChargingDetails.failedTransactionPercentage < 0" name="trending-down" class="feather-sm text-danger text-start"></i-feather>
                                <small class="ms-2 text-muted">{{ Math.abs(chartData.toDateChargingDetails.failedTransactionPercentage) | percent }} 
                                    <span *ngIf="chartData.toDateChargingDetails.failedTransactionPercentage > 0">increase</span>
                                    <span *ngIf="chartData.toDateChargingDetails.failedTransactionPercentage < 0">decrease</span>
                                </small>                               
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col below-chart p-2">
        <div class="card h-100">
            <div class="card-body">
                <p class="d-flex h6 m-0 mb-2 fw-bold">{{ 'Current Power Utilization Over Time' | translate }}</p>

                <div class="row m-0 px-2">
                    <div class="col px-1">
                        <div class="card-body p-3">
                            <div class="align-self-center">
                                <small class="mt-0 mb-1 fw-bold text-summary">Consumption</small>
                                <h2 class="mt-2 text-summary">{{ chartData.powerUtilizationDetails.totalConsumptionKwh | number: '1.2'}}<span class="px-1"><small>kWh</small></span></h2>
                            </div>
                        </div>
                    </div>
                    <div class="col px-1">
                        <div class="card-body p-3">
                            <div class="align-self-center text-summary">
                                <small class="mt-0 mb-1 fw-bold text-summary">Generated Revenue</small>
                                <h2 class="mt-2 text-summary">{{ chartData.powerUtilizationDetails.generatedRevenue | number: '1.2'}}<span class="px-1"><small>MYR</small></span></h2>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div style="height:370px;" class="d-flex flex-column">
                        <apx-chart [series]="powerUtilizationChartOptions.series"
                            [chart]="powerUtilizationChartOptions.chart" [xaxis]="powerUtilizationChartOptions.xaxis"
                            [yaxis]="powerUtilizationChartOptions.yaxis" [grid]="powerUtilizationChartOptions.grid"
                            [stroke]="powerUtilizationChartOptions.stroke" [tooltip]="powerUtilizationChartOptions.tooltip"
                            [dataLabels]="powerUtilizationChartOptions.dataLabels"
                            [legend]="powerUtilizationChartOptions.legend" [colors]="powerUtilizationChartOptions.colors"
                            [fill]="powerUtilizationChartOptions.fill" [markers]="powerUtilizationChartOptions.markers">
                        </apx-chart>
                    </div>
                    <div class="d-flex flex-wrap mb-4">
                        <div class="mx-auto">
                            <ul class="list-inline">
                                <li class="list-inline-item">
                                    <h6 class="text-dark"><i class="fa fa-circle fs-1 me-2 "
                                            style="color:#BFC5D9"></i>Excess Power</h6>
                                </li>
                                <li class="list-inline-item">
                                    <h6 class="text-dark"><i class="fa fa-circle fs-1 me-2"
                                            style="color:#506194"></i>Consumed Power</h6>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
    
            </div>
        </div>
    </div>

    <div class="col below-chart p-2">
        <div class="card h-100">
            <div class="card-body">
                <p class="d-flex h6 m-0 mb-2 fw-bold">{{ 'Breakdown of Error-codes over last 24h' | translate }}</p>

                <div class="row m-0 my-4">
                    <div class="col">
                        <div class="breakdown-label fault">
                            <small class="text-muted">Fault & Connectivity Lost</small>
                            <p class="h3 m-0">{{chartData.breakdownErrorDetails.faultAndConnectivityLostCount}}</p>
                        </div>
                    </div>
                    <div class="col">
                        <div class="breakdown-label resolved">
                            <small class="mt-0 mb-1 text-muted">Total Resolved</small>
                            <p class="h3 m-0">{{chartData.breakdownErrorDetails.resolvedCount}}</p>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="breakdown-label failed">
                            <small class="mt-0 mb-1 text-muted">Payment Failed Amount</small>
                            <p class="h3 m-0">{{chartData.breakdownErrorDetails.paymentFailedAmount | number: '1.2'}}<span class="px-1"><small>MYR</small></span></p>
                        </div>
                    </div>
                </div>

                <div class="table-responsive bg-white ps-0">
                    <table class="table bg-white mb-0 text-nowrap">
                        <thead>
                            <tr class="text-muted">
                                <th><small>Code</small></th>
                                <th class="text-center"><small>Severity</small></th>
                                <th class="text-center"><small>Status</small></th>
                                <th><small>Workaround</small></th>
                                <th class="text-end"><small>Time Occur</small></th>
                            </tr>
                        </thead>
                        <tbody *ngIf="chartData.breakdownErrorDetails.breakdownErrorList.length == 0">
                            <tr rowspan="3" class="text-center align-middle">
                                <td colspan="5"><span class="text-muted">
                                    No Record(s) Found.
                                </span></td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="chartData.breakdownErrorDetails.breakdownErrorList.length > 0">
                            <tr *ngFor="let error of chartData.breakdownErrorDetails.breakdownErrorList">
                                <td class="text-error">
                                    <span class="fw-bold">{{ error.errorCode }}</span>
                                    <p><small class="text-wrap">{{ error.errorDescription}}</small></p>
                                </td>
                                
                                <td class="text-center">
                                    <div *ngIf="error.severity == errorCodeSeverity.critical.id " class="badge bg-critical"><span
                                            class="text-white">{{ errorCodeSeverity.critical.message }}</span></div>
                                    <div *ngIf="error.severity == errorCodeSeverity.high.id " class="badge bg-high"><span
                                            class="text-white">{{ errorCodeSeverity.high.message }}</span></div>
                                    <div *ngIf="error.severity == errorCodeSeverity.medium.id " class="badge bg-medium"><span
                                            class="text-white">{{ errorCodeSeverity.medium.message }}</span></div>
                                    <div *ngIf="error.severity == errorCodeSeverity.minor.id " class="badge bg-minor"><span
                                            class="text-white">{{ errorCodeSeverity.minor.message }}</span></div>
                                    <div *ngIf="error.severity == errorCodeSeverity.unknown.id " class="badge bg-unknown"><span
                                            class="text-white">{{ errorCodeSeverity.unknown.message }}</span></div>
                                </td>
                                <td class="text-center">
                                    <div *ngIf="error.status == errorCodeStatus.fixed.id " class="badge badge-success"><span>{{
                                        errorCodeStatus.fixed.message }}</span></div>
                                    <div *ngIf="error.status != errorCodeStatus.fixed.id " class="badge badge-in-progress"><span>{{
                                        errorCodeStatus.inProgress.message }}</span></div>
                                </td>
                                <td>
                                    {{ 'testtttt' }}
                                </td>
                                <td class="text-end">
                                    <span>{{ error.timeOccur | date:'hh:mm a'}}</span>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<ng-template #formModal let-modal>
    <div class="modal-container px-5 pt-5 pb-2">
        <div #myForm="ngForm" ngForm>
            <div *ngIf="selectedAction == 'RemoteStartTransaction'">
                <div class="form-group mb-3">
                    <label class="form-label required" for="connectorId">Connector ID</label>
                    <select name="connectorId" id="connectorId" class="form-select" [(ngModel)]="remoteStartForm.connectorId" required
                        [class.text-muted]="remoteStartForm.connectorId == null">
                        <option class="text-muted" hidden [value]="null">Please Select</option>
                        <option class="text-dark" *ngFor="let c of [].constructor(selectedCP.totalConnectors); let i = index" [value]="i + 1">{{ i + 1 }}</option>
                    </select>
                </div>
        
                <div class="form-group mb-3">
                    <label class="form-label required" for="idTag">ID Tag</label>
                    <input type="text" class="form-control" name="idTag" id="idTag" [(ngModel)]="remoteStartForm.idTag" required>
                </div>
        
                <div class="form-group mb-3">
                    <label class="form-label" for="chargingProfile">Charging Profile</label>
                    <select name="chargingProfile" id="chargingProfile" class="form-select" disabled [(ngModel)]="remoteStartForm.chargingProfile">
                        <option [value]="null"></option>
                    </select>
                </div>    
            </div>

            <div *ngIf="selectedAction == 'RemoteStopTransaction' || selectedAction == 'UnlockConnector'">
                <div class="form-group mb-3">
                    <label class="form-label required" for="connectorId">Connector ID</label>
                    <select name="connectorId" id="connectorId" class="form-select" [(ngModel)]="connectorId" required
                        [class.text-muted]="connectorId == null">
                        <option class="text-muted" hidden [value]="null">Please Select</option>
                        <option class="text-dark" *ngFor="let c of [].constructor(selectedCP.totalConnectors); let i = index" [value]="i + 1">{{ i + 1 }}</option>
                    </select>
                </div>
            </div>

            <div *ngIf="selectedAction == 'Reset'">
                <div class="form-group mb-3">
                    <label class="form-label required" for="type">Type</label>
                    <select name="type" id="type" class="form-select" [(ngModel)]="resetTypeId" required>
                        <option [value]="resetType.Hard">Hard</option>
                        <option [value]="resetType.Soft">Soft</option>
                    </select>
                </div>   
            </div>

            <div *ngIf="selectedAction == 'TriggerMessage'">
                <div class="form-group mb-3">
                    <label class="form-label required" for="requestMessage">Requested Message</label>
                    <select name="requestMessage" id="requestMessage" class="form-select" [(ngModel)]="triggerMessageForm.requestedMessage" required
                        [class.text-muted]="triggerMessageForm.requestedMessage == null">
                        <option class="text-muted" hidden [value]="null">Please Select</option>
                        <option class="text-dark" [value]="messageTrigger.bootNotification">{{ messageTrigger.bootNotification }}</option>
                        <option class="text-dark" [value]="messageTrigger.diagnosticsStatusNotification">{{ messageTrigger.diagnosticsStatusNotification }}</option>
                        <option class="text-dark" [value]="messageTrigger.firmwareStatusNotification">{{ messageTrigger.firmwareStatusNotification }}</option>
                        <option class="text-dark" [value]="messageTrigger.heartbeat">{{ messageTrigger.heartbeat }}</option>
                        <option class="text-dark" [value]="messageTrigger.meterValues">{{ messageTrigger.meterValues }}</option>
                        <option class="text-dark" [value]="messageTrigger.statusNotification">{{ messageTrigger.statusNotification }}</option>
                    </select>
                </div>

                <div class="form-group mb-3">
                    <label class="form-label" for="connectorId">Connector ID</label>
                    <select name="connectorId" id="connectorId" class="form-select" [(ngModel)]="triggerMessageForm.connectorId" 
                        [class.text-muted]="triggerMessageForm.connectorId == null">
                        <option class="text-muted" [value]="null">Not Specified</option>
                        <option class="text-dark" *ngFor="let c of [].constructor(selectedCP.totalConnectors); let i = index" [value]="i + 1">{{ i + 1 }}</option>
                    </select>
                </div>
            </div>

            <div *ngIf="selectedAction == 'ChangeAvailability'">               
                <div class="form-group mb-3">
                    <label class="form-label required" for="connectorId">Connector ID</label>
                    <select name="connectorId" id="connectorId" class="form-select" [(ngModel)]="changeAvailabilityForm.connectorId" required
                        [class.text-muted]="changeAvailabilityForm.connectorId == null">
                        <option class="text-muted" hidden [value]="null">Please Select</option>
                        <option class="text-dark" [value]="0">All - 0</option>
                        <option class="text-dark" *ngFor="let c of [].constructor(selectedCP.totalConnectors); let i = index" [value]="i + 1">{{ i + 1 }}</option>
                    </select>
                </div>

                <div class="form-group mb-3">
                    <label class="form-label required" for="type">Type</label>
                    <select name="type" id="type" class="form-select" [(ngModel)]="changeAvailabilityForm.type" required
                        [class.text-muted]="changeAvailabilityForm.type == null">
                        <option class="text-muted" hidden [value]="null">Please Select</option>
                        <option class="text-dark" [value]="availabilityType.inoperative">{{ availabilityType.inoperative }}</option>
                        <option class="text-dark" [value]="availabilityType.operative">{{ availabilityType.operative }}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex justify-content-end button-group px-4 mb-4">
        <button class="btn btn-outline-default" (click)="modalService.dismissAll(); btnText = 'Select';">Cancel</button>
        <button class="btn btn-default" [disabled]="myForm.invalid" (click)="onAction(selectedAction)">Execute Action</button>
    </div>

</ng-template>

<notifier-container></notifier-container>

